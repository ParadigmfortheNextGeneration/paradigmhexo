var urlparser = require('url');
var ResponsiveVideo = require('responsive-video');


module.exports = function(url) {
  var parsed = urlparser.parse(url);
  
  if (url.indexOf('vimeo.com') != -1) {
      var type = 'vimeo';
      var id = parsed['path'].replace('/', '');
  }
  if (url.indexOf('dai.ly') != -1) {
      var type = 'dailymotion';
      var id = parsed['path'].replace('/', '');
  }

  if ((url.indexOf('youtube.com') != -1) || (url.indexOf('youtu.be') != -1)) {
    if (url.indexOf('youtu.be') != -1) {
        var id = parsed['path'].replace('/', '');
    }
    else {
        var id = parsed['query'].replace('v=', '');
    }
  }
  return ResponsiveVideo(id, 'youtube');
}